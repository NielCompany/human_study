{% extends "layout/layout.html" %}

{% block title_block %}
  <title>AI 하자 점검 - 이미지 업로드</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/upload.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
{% endblock %}

{% block content %}
<main class="upload-wrapper">
  <div class="upload-card">
    <!-- <i class="fas fa-upload fa-3x upload-icon"></i> -->
    <h2>하자 이미지를 업로드 해주세요</h2>
    <p>AI가 자동으로 분석하고 리포트를 생성해드립니다.</p>
    
    <!-- ✅ class 추가 -->
    <form method="POST" enctype="multipart/form-data" class="upload-form">
      
      <img id="preview" src="#" alt="미리보기" style="display: none;" />
      <input type="file" name="image" accept="image/*" onchange="previewImage(event)" required />
      <button type="submit"><i class="fas fa-robot"></i> 예측 시작</button>
    </form>
  </div>
</main>

<script>
  function previewImage(event) {
    const input = event.target;
    const preview = document.getElementById("preview");
    
    if (input.files && input.files[0]) {
      const reader = new FileReader();
      reader.onload = function(e) {
        preview.src = e.target.result;
        preview.style.display = "block";
      };
      reader.readAsDataURL(input.files[0]);
    }
  }
</script>
{% endblock %}
