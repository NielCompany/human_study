{% extends "layout/layout.html" %}

{% block title_block %}
  <title>AI í•˜ì ì ê²€ - ì˜ˆì¸¡ ê²°ê³¼</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/result.css') }}">
{% endblock %}

{% block content %}
<main class="result-wrapper">

  <!-- ê²°ê³¼ ë°•ìŠ¤ -->
  <div class="result-card">
    <!-- ì¢Œì¸¡: ì´ë¯¸ì§€ -->
    <div class="result-image">
      <img src="{{ url_for('static', filename='uploads/' + image_name) }}"
           alt="Uploaded Image"
           class="uploaded-img" />
    </div>

    <!-- ìš°ì¸¡: ì˜ˆì¸¡ ê²°ê³¼ -->
    <div class="result-info">
      <h2>ì˜ˆì¸¡ ê²°ê³¼</h2>
      <!-- <p><strong>íŒŒì¼ ì´ë¦„:</strong> {{ image_name }}</p> -->
      <p><strong>ëŒ€ë¶„ë¥˜:</strong> <span id="pred">{{ predicted_class }}</span></p>

      {% if gemini_description %}
      <div class="gemini-box">
        <p><strong>í•˜ì ì„¤ëª… :</strong></p>
        <div class="gemini-text">
          {{ gemini_description | safe }}
        </div>
      </div>
      {% endif %}

      <button class="copy-btn" onclick="copyGeminiText()">ğŸ“‹ Copy</button>
    </div>
  </div>

  <!-- âœ… ë„¤ëª¨ ë°•ìŠ¤ ë°”ê¹¥ìª½ìœ¼ë¡œ ë²„íŠ¼ ë°°ì¹˜ -->
  <div class="back-wrapper">
    <a href="{{ url_for('predict') }}">
      <button class="back-button">â† ë‹¤ì‹œ ì—…ë¡œë“œí•˜ê¸°</button>
    </a>
  </div>

</main>

<script>
  function copyGeminiText() {
    const category = document.getElementById('pred').innerText; // ëŒ€ë¶„ë¥˜ í…ìŠ¤íŠ¸
    const description = document.querySelector('.gemini-text').innerText; // í•˜ì ì„¤ëª…
    const fullText = `ëŒ€ë¶„ë¥˜: ${category}\n\n${description}`; // ì›í•˜ëŠ” í¬ë§·

    navigator.clipboard.writeText(fullText).then(() => {
      alert('ì˜ˆì¸¡ ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
    });
  }
</script>

{% endblock %}
